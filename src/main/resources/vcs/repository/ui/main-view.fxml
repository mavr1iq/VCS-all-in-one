<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.canvas.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="vcs.repository.ui.MainController">

    <left>
        <VBox spacing="10" style="-fx-background-color: #f0f0f0; -fx-padding: 10;">
            <Label text="Repositories" style="-fx-font-weight: bold;"/>
            <ListView fx:id="repoListView"/>
            <Button text="Create New Repository" onAction="#onCreateRepoClicked" maxWidth="Infinity"/>
        </VBox>
    </left>

    <center>
        <TabPane fx:id="mainTabPane">

            <Tab text="Changes &amp; Commit" closable="false">
                <VBox spacing="10" style="-fx-padding: 15;">

                    <TitledPane text="Synchronization (P2P)" collapsible="false">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button text="⬇ Pull from..." onAction="#onPullClicked"
                                    style="-fx-background-color: #2196F3; -fx-text-fill: white;"
                                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>

                            <Button text="⬆ Push to..." onAction="#onPushClicked"
                                    style="-fx-background-color: #2196F3; -fx-text-fill: white;"
                                    maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
                        </HBox>
                    </TitledPane>

                    <Separator/>

                    <Label text="Changed Files (Working Directory):"/>
                    <ListView fx:id="fileListView" VBox.vgrow="ALWAYS"/>

                    <Label text="Commit Message:"/>
                    <TextArea fx:id="commitMessageArea" prefRowCount="3"/>

                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Button text="Refresh" onAction="#onRefreshClicked"/>
                        <Button text="Commit" onAction="#onCommitClicked" style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                    </HBox>
                </VBox>
            </Tab>

            <Tab text="History" closable="false">
                <VBox spacing="10" style="-fx-padding: 15;">
                    <TableView fx:id="historyTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colCommitId" text="ID" prefWidth="70"/>
                            <TableColumn fx:id="colAuthor" text="Author ID" prefWidth="100"/>
                            <TableColumn fx:id="colMessage" text="Message" prefWidth="400"/>
                        </columns>
                    </TableView>
                    <Button text="Load History" onAction="#onLoadHistoryClicked"/>
                </VBox>
            </Tab>

            <Tab text="Branches &amp; Tags" closable="false">
                <ScrollPane fitToWidth="true">
                    <VBox spacing="20" style="-fx-padding: 15;">

                        <TitledPane text="Branch Management" collapsible="false">
                            <VBox spacing="10">
                                <Label text="Existing Branches:"/>
                                <ListView fx:id="branchListView" prefHeight="150"/>

                                <Separator/>

                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <Label text="New Branch Name:"/>
                                    <TextField fx:id="branchNameField" promptText="feature/new-logic" HBox.hgrow="ALWAYS"/>
                                    <Button text="Create Branch" onAction="#onCreateBranchClicked"/>
                                </HBox>

                                <HBox spacing="10">
                                    <Button text="Checkout Selected" onAction="#onCheckoutClicked" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>

                                    <Button text="Merge into Current" onAction="#onMergeClicked" maxWidth="Infinity" HBox.hgrow="ALWAYS" style="-fx-background-color: #ff9800; -fx-text-fill: white;"/>
                                </HBox>
                            </VBox>
                        </TitledPane>

                        <TitledPane text="Tag Management" collapsible="false">
                            <VBox spacing="10">
                                <GridPane hgap="10" vgap="10">
                                    <Label text="Tag Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                    <TextField fx:id="tagNameField" promptText="v1.0.0" GridPane.rowIndex="0" GridPane.columnIndex="1" HBox.hgrow="ALWAYS"/>

                                    <Label text="Message:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                    <TextField fx:id="tagMessageField" promptText="Release notes..." GridPane.rowIndex="1" GridPane.columnIndex="1" HBox.hgrow="ALWAYS"/>
                                </GridPane>
                                <Button text="Create Tag" onAction="#onCreateTagClicked" maxWidth="Infinity"/>
                            </VBox>
                        </TitledPane>

                    </VBox>
                </ScrollPane>
            </Tab>

            <Tab text="Graph" closable="false">
                <VBox>
                    <HBox spacing="10" style="-fx-padding: 10;">
                        <Button text="Refresh Graph" onAction="#onRefreshGraphClicked"/>
                    </HBox>

                    <TextArea fx:id="graphTextArea" VBox.vgrow="ALWAYS" editable="false"
                              style="-fx-font-family: 'Consolas', 'Monospaced'; -fx-font-size: 12px;"/>
                </VBox>
            </Tab>

        </TabPane>
    </center>

    <bottom>
        <HBox style="-fx-border-color: #ccc; -fx-border-width: 1 0 0 0; -fx-padding: 5;">
            <Label fx:id="statusLabel" text="Ready"/>
        </HBox>
    </bottom>
</BorderPane>